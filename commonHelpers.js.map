{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/alert-icon.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44388505-390a672441da303f6d08bc48a';\n\nexport async function getImages(query, page) {\n  const baseURL = 'https://pixabay.com/api/';\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page: page,\n  };\n\n  const response = await axios.get(baseURL, { params });\n  return {\n    hits: response.data.hits,\n    totalHits: response.data.totalHits,\n  };\n}\n","export default \"__VITE_ASSET__5e15ff8a__\"","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport closeIcon from '../img/alert-icon.svg';\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.9,\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nexport function showLoader() {\n  loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction imageTemplate(image) {\n  return `<a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p><b>Likes:</b> ${image.likes}</p>\n        <p><b>Views:</b> ${image.views}</p>\n        <p><b>Comments:</b> ${image.comments}</p>\n        <p><b>Downloads:</b> ${image.downloads}</p>\n      </div>\n    </a>`;\n}\n\nfunction imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\n\nexport function renderImages(images, isFirstLoad) {\n  const markup = imagesTemplate(images);\n  if (isFirstLoad) {\n    galleryContainer.innerHTML = markup;\n  } else {\n    galleryContainer.innerHTML += markup;\n  }\n  gallery.refresh();\n}\n\nexport function showError(message) {\n  iziToast.error({\n    message,\n    messageSize: '16',\n    messageColor: '#fff',\n    backgroundColor: '#ef4040',\n    position: 'topLeft',\n    close: true,\n    closeOnEscape: true,\n    closeOnClick: true,\n    progressBar: true,\n    progressBarColor: '#ffbebe',\n    iconUrl: closeIcon,\n    iconColor: '#fff',\n  });\n}\n","import { getImages } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  showError,\n  showLoader,\n  hideLoader,\n} from './js/render-functions.js';\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.querySelector('.search-form');\n  const ulEl = document.querySelector('.gallery');\n  const loadMoreBtn = document.querySelector('.load-more');\n\n  function scrollElem() {\n    const liEl = ulEl.children[0];\n    const heightOfLiEl = liEl.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: heightOfLiEl * 2,\n      behavior: 'smooth',\n    });\n  }\n\n  form.addEventListener('submit', async event => {\n    event.preventDefault();\n    const query = event.target.query.value.trim();\n    if (!query) {\n      showError('Please enter a search term.');\n      return;\n    }\n\n    showLoader();\n    currentQuery = query;\n    currentPage = 1;\n    ulEl.innerHTML = ''; // Clear the gallery for new search queries\n\n    try {\n      const data = await getImages(currentQuery, currentPage);\n      hideLoader();\n      totalHits = data.totalHits;\n      if (data.hits.length === 0) {\n        showError(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n        loadMoreBtn.style.display = 'none';\n      } else {\n        renderImages(data.hits, true);\n        loadMoreBtn.style.display = 'block';\n      }\n    } catch (error) {\n      hideLoader();\n      showError('An error occurred while fetching images.');\n      console.error('Error fetching images:', error);\n      loadMoreBtn.style.display = 'none';\n    }\n\n    form.reset();\n  });\n\n  loadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n    showLoader();\n\n    try {\n      const data = await getImages(currentQuery, currentPage);\n      hideLoader();\n      renderImages(data.hits, false);\n      scrollElem();\n      if (currentPage * 15 >= totalHits) {\n        showError(\"We're sorry, but you've reached the end of search results.\");\n        loadMoreBtn.style.display = 'none';\n      }\n    } catch (error) {\n      hideLoader();\n      showError('An error occurred while fetching images.');\n      console.error('Error fetching images:', error);\n      loadMoreBtn.style.display = 'none';\n    }\n  });\n});\n"],"names":["API_KEY","getImages","query","page","baseURL","params","response","axios","closeIcon","gallery","SimpleLightbox","galleryContainer","loader","showLoader","hideLoader","imageTemplate","image","imagesTemplate","images","renderImages","isFirstLoad","markup","showError","message","iziToast","currentPage","currentQuery","totalHits","form","ulEl","loadMoreBtn","scrollElem","heightOfLiEl","event","data","error"],"mappings":"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"}